(function () {
  'use strict';

  function legacy(){function e(){var e;document.querySelector("[id='ff_nsc_bar_auto_detect_ml_plugin']")&&(e=document.querySelector("[name='nsc_bar_auto_detect_ml_plugin']")),e&&e.checked?(document.getElementById("tr_ml_source").hidden=!0,document.getElementById("tr_language_extractor_regex").hidden=!0,document.getElementById("tr_ml_cookie_name").hidden=!0,document.getElementById("tr_ml_available_language_codes").hidden=!0):e&&(document.getElementById("tr_ml_source").hidden=!1,document.getElementById("tr_language_extractor_regex").hidden=!1,document.getElementById("tr_ml_available_language_codes").hidden=!1,t());}function t(){var e;document.querySelector("[name='nsc_bar_ml_source']")&&(e=document.querySelector("[name='nsc_bar_ml_source']").value),e&&"cookie"===e?document.getElementById("tr_ml_cookie_name").hidden=!1:document.getElementById("tr_ml_cookie_name")&&(document.getElementById("tr_ml_cookie_name").hidden=!0);}function n(e){e.preventDefault();var t=document.createElement("div");t.className="nsc_bara_overlay";var n=document.createElement("div");n.className="nsc_bara_overlay-content",n.innerHTML='<span class="nsc_bara_overlay-close" id="nscBaraCloseOverlay">&times;</span><p id="nscBaraOverlayContentText" class="description">Reset all custom services. Are you certain?</p><button id="nscBaraOverlayButton" class="button button-primary">Reset now!</button>',t.appendChild(n),document.body.appendChild(t),document.getElementById("nscBaraCloseOverlay").addEventListener("click",(function(){document.body.removeChild(t);}));var a=document.getElementById("nscBaraOverlayButton");a&&a.addEventListener("click",(function(){a.innerHTML="Resetting...",a.disabled=!0;var e=new XMLHttpRequest;e.withCredentials=!0,e.addEventListener("readystatechange",(function(){4===this.readyState&&200===e.status&&document.body.removeChild(t),4===this.readyState&&200!==e.status&&(document.getElementById("nscBaraOverlayContentText").innerText="The custom services could not be resetted. The API returned: "+e.status+". Is the wordpress API available? This plugin needs wordpress API access.",a.innerHTML="Try again",a.disabled=!1);})),e.open("POST",php_vars.restURL+"beautiful-and-responsive-cookie-consent/v1/customServices"),e.setRequestHeader("_wpnonce",php_vars.nonce),e.setRequestHeader("X-WP-Nonce",php_vars.nonce),e.setRequestHeader("Content-Type","application/json"),e.send("{}");}));}document.addEventListener("DOMContentLoaded",(function(a){t(),e(),function(){var e,t=["[id='ff_nsc_bar_blacklistPage']"];for(let a=0;a<t.length;a+=1)if(document.querySelector(t[a])){e=document.querySelector(t[a]).value;try{var n=(e=JSON.parse(e)).join(",");document.querySelector(t[a]).value=n;}catch(e){console.log(e);}}}();var c=document.getElementById("nsc_bara_reset_custom_services");c&&c.addEventListener("click",n);var r=document.querySelector("[name='nsc_bar_ml_source']");r&&r.addEventListener("change",(function(){t();}));var o=document.querySelector("[id='ff_nsc_bar_auto_detect_ml_plugin']");o&&o.addEventListener("click",(function(){e();}));}));}

  function addSettingsToField(){loaderToField(!0);var e=new XMLHttpRequest;e.withCredentials=!0,e.addEventListener("readystatechange",(function(){4===this.readyState&&(setValueSettingsField(this.responseText),loaderToField(!1));})),e.open("GET",php_vars.restURL+"beautiful-and-responsive-cookie-consent/v1/settings"),e.setRequestHeader("_wpnonce",php_vars.nonce),e.setRequestHeader("X-WP-Nonce",php_vars.nonce),e.setRequestHeader("Content-Type","application/json"),e.send();}function setValueSettingsField(e){const t=document.getElementById("ff_nsc_bar_all_settings");t&&(t.innerHTML=JSON.stringify(JSON.parse(e),null,4).replace("<br>","\n"));}function loaderToField(e){const t=document.getElementById("ff_nsc_bar_all_settings");t&&(!0===e&&(t.style="background: url('/wp-admin/images/spinner-2x.gif') no-repeat center;"),!1===e&&(t.style=""));}

  legacy(),document.addEventListener("DOMContentLoaded",addSettingsToField);

})();
